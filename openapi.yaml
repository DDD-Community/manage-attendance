openapi: 3.0.0
info:
  title: DDD API
  description: ì‚¬ìš©ì ë“±ë¡, ì¶œì„ ë° ê´€ë¦¬ APIì…ë‹ˆë‹¤.
  version: 0.3.0

servers:
  - url: https://localhost:8000/v1
    description: ë¡œì»¬ ê°œë°œ ì„œë²„

tags:
  - name: health-check
    description: ì„œë²„ ìƒíƒœ í™•ì¸ ê´€ë ¨ ì‘ì—…
  - name: auth
    description: ì‚¬ìš©ì ì¸ì¦ ê´€ë ¨ ì‘ì—…
  - name: invite-code
    description: ì´ˆëŒ€ì½”ë“œ ê´€ë ¨ ì‘ì—…
  - name: user
    description: ì‚¬ìš©ì ë“±ë¡ ë° ê´€ë¦¬ ê´€ë ¨ ì‘ì—…
  - name: qr
    description: QR ì½”ë“œ ê´€ë ¨ ì‘ì—…
  - name: schedule
    description: ìŠ¤ì¼€ì¥´ ê´€ë ¨ ì‘ì—…
  - name: attendance
    description: ì¶œì„ ê´€ë ¨ ì‘ì—…

paths:
  /health/:
    get:
      tags:
        - health-check
      summary: ì„œë²„ í—¬ìŠ¤ ì²´í¬
      description: ì„œë²„ì˜ ìƒíƒœë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ í—¬ìŠ¤ ì²´í¬ ì—”ë“œí¬ì¸íŠ¸ì…ë‹ˆë‹¤.
      responses:
        '200':
          description: ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™ ì¤‘
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: number
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      status:
                        type: string
                        example: "healthy"
                      timestamp:
                        type: string
                        format: date-time
                        description: ìš”ì²­ ì‹œê° (ISO8601 í¬ë§·, UTC)
                        example: "2024-10-06T12:34:56Z"

  /auth/google/url/:
    get:
      tags:
        - auth
      summary: Generate Google Login URL
      description: Endpoint to generate the Google login URL.
      responses:
        200:
          description: Successfully generated the Google login URL.
          content:
            application/json:
              schema:
                type: object
                properties:
                  login_url:
                    type: string
                    example: "https://accounts.google.com/o/oauth2/auth"

  /auth/google/login/:
    post:
      tags:
        - auth
      summary: Login with Google
      description: Login or register a user using Google auth.
      requestBody:
        description: The payload for logging in with Google.
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                access_token:
                  type: string
                  example: "your-google-access-token"
      responses:
        200:
          description: Successfully logged in.
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    example: "your-auth-token"
        400:
          description: Invalid access token or login failed.

  /auth/google/callback/:
    get:
      tags:
        - auth
      summary: Google auth Callback
      description: Handle the callback from Google after successful auth.
      responses:
        200:
          description: Successfully logged in and received JWT.
          content:
            application/json:
              schema:
                type: object
                properties:
                  access_token:
                    type: string
                    example: "your-jwt-access-token"
                  refresh_token:
                    type: string
                    example: "your-jwt-refresh-token"
        400:
          description: auth failed.

  /auth/token/refresh/:
    post:
      tags:
        - auth
      summary: Refresh JWT
      description: Refresh the JWT access token using the refresh token.
      requestBody:
        description: The payload for refreshing the access token.
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                refresh:
                  type: string
                  example: "your-jwt-refresh-token"
      responses:
        200:
          description: Successfully refreshed the access token.
          content:
            application/json:
              schema:
                type: object
                properties:
                  access:
                    type: string
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzM4NjcwNjg5LCJpYXQiOjE3Mzg1ODM5MzUsImp0aSI6ImY3MmU2MjhjNzM4YjQ2NzM4MWRkMjY3NWMwN2NkN2IzIiwidXNlcl9pZCI6Mn0.JixmiWoNJrQmNJSXju160MzIymQ50PuE3-oLlXCYBJg"
                  access_expiration: 
                    type: string
                    example: "2025-02-04T12:04:49.565736Z"
        400:
          description: Invalid refresh token.

  /auth/token/verify/:
    post:
      tags:
        - auth
      summary: Verify JWT
      description: Verify the JWT access token and return the associated user ID.
      requestBody:
        description: The payload for verifying the JWT.
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                token:
                  type: string
                  example: "your-jwt-access-token"
      responses:
        200:
          description: Successfully verified the JWT and retrieved the user ID.
          content:
            application/json:
              schema:
                type: object
                properties:
                  empty:
                    type: string
        '401':
          description: Token is invalid or expired.
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string
                    example: "Token is invalid or expired"
                  code:
                    type: string
                    example: "token_not_valid"
        400:
          description: Invalid or expired JWT.

  /invite-code/:
    post:
      tags:
        - invite-code
      summary: ì´ˆëŒ€ì½”ë“œ ìƒì„±
      description: ì¼ë°˜ ìœ ì € ë˜ëŠ” ìš´ì˜ì§„ìœ¼ë¡œ ë“±ë¡í•  ìˆ˜ ìˆëŠ” ì´ˆëŒ€ì½”ë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                invite_type:
                  type: string
                  enum: [member, moderator]
                  description: ì´ˆëŒ€ì½”ë“œ ìœ í˜• (ë©¤ë²„ ë˜ëŠ” ìš´ì˜ì§„)
                expire_time:
                  type: string
                  format: date-time
                  description: ì´ˆëŒ€ì½”ë“œ ë§Œë£Œ ì‹œê° (ê¸°ë³¸ ì¼ì£¼ì¼)
                one_time_use:
                  type: boolean
                  default: false
                  description: ì´ˆëŒ€ ì½”ë“œë¥¼ í•œ ë²ˆë§Œ ì‚¬ìš© ê°€ëŠ¥í•œ ê²½ìš° (ê¸°ë³¸ false)
              required:
                - invite_type
      responses:
        '201':
          description: ì´ˆëŒ€ì½”ë“œê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: number
                  message:
                    type: string
                  data:
                    $ref: '#/components/schemas/InviteCode'
        '400':
          description: ì˜ëª»ëœ ìš”ì²­ ë°ì´í„°
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: ì¸ì¦ ì‹¤íŒ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /invite-code/validation/:
    post:
      tags:
        - invite-code
      summary: ì´ˆëŒ€ì½”ë“œ ê²€ì¦
      description: ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì´ˆëŒ€ì½”ë“œì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                invite_code:
                  type: string
                  description: ê²€ì¦í•  ì´ˆëŒ€ì½”ë“œ
              required:
                - invite_code
      responses:
        '200':
          description: ì´ˆëŒ€ì½”ë“œê°€ ìœ íš¨í•¨
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: number
                  message:
                    type: string
                    default: "valid invite code."
                  data:
                    type: object
                    properties:
                      valid:
                        type: boolean
                        description: ì´ˆëŒ€ì½”ë“œì˜ ìœ íš¨ì„± ì—¬ë¶€.
                      invite_type:
                        type: string
                        enum: [member, moderator]
                        description: ì´ˆëŒ€ ìœ í˜• (ë©¤ë²„ ë˜ëŠ” ìš´ì˜ì§„).
        '400':
          description: ì˜ëª»ëœ ì´ˆëŒ€ì½”ë“œ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /users/:
    post:
      tags:
        - user
      summary: ì‹ ê·œ ìœ ì € ë“±ë¡
      description: ì´ˆëŒ€ì½”ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì¼ë°˜ ìœ ì € ë˜ëŠ” ìš´ì˜ì§„ì„ ë“±ë¡í•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                invite_code:
                  type: string
                  example: "1234"
                  description: ë“±ë¡ì— ì‚¬ìš©í•  ì´ˆëŒ€ì½”ë“œ
                name:
                  type: string
                  example: "ê¹€ë””ë””"
                  description: ìœ ì €ì˜ ì´ë¦„
                tags:
                  type: array
                  example: ["role:member", "position:designer", "team:ios2", "generation:11ê¸°"]
                  items:
                    type: string
                    description: ì‚¬ìš©ì íƒœê·¸
              required:
                - invite_code
                - name
      responses:
        '201':
          description: ìœ ì €ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        '400':
          description: ì˜ëª»ëœ ì´ˆëŒ€ì½”ë“œ ë˜ëŠ” ëˆ„ë½ëœ ì •ë³´
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /users/{user_id}/:
    get:
      tags:
        - user
      summary: ìœ ì € ì •ë³´ ì¡°íšŒ ("me" ì‚¬ìš© ê°€ëŠ¥)
      description: ì¸ì¦ëœ ì‚¬ìš©ìì˜ ê°œì¸ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - name: user_id
          required: true
          in: path
          schema:
            type: string
          description: ì¡°íšŒí•  ìœ ì €ì˜ ID (UUID ì‚¬ìš©)
      responses:
        '200':
          description: ê°œì¸ ì •ë³´ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: number
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      name:
                        type: string
                        example: "ê¹€ë””ë””"
                        description: ìœ ì € ì´ë¦„
                      tags:
                        type: array
                        example: ["role:member", "position:designer", "team:ios2", "generation:11ê¸°"]
                        items:
                          type: string
                          description: ì‚¬ìš©ì íƒœê·¸
        '401':
          description: ì¸ì¦ ì‹¤íŒ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    
    patch:
      tags: 
        - user
      summary: ìœ ì € ì •ë³´ ìˆ˜ì •
      description: ìœ ì €ì˜ ì •ë³´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - name: user_id
          required: true
          in: path
          schema:
            type: string
          description: ìˆ˜ì •í•  ìœ ì €ì˜ ID (UUID ì‚¬ìš©)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "ê¹€ë””ë””"
                  description: ìœ ì €ì˜ ì´ë¦„
                tags:
                  type: array
                  example: ["role:member", "position:designer", "team:ios2", "generation:11ê¸°"]
                  items:
                    type: string
                    description: ì‚¬ìš©ì íƒœê·¸
      responses:
        '200':
          description: ê°œì¸ì •ë³´ ìˆ˜ì • ì™„ë£Œ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"

    delete:
      tags:
        - user
      summary: ìœ ì € íƒˆí‡´
      description: ì¸ì¦ëœ ì‚¬ìš©ìì˜ ìœ ì € ì •ë³´ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - name: user_id
          in: path
          required: true
          schema:
            type: string
          description: ì‚­ì œí•  ìœ ì €ì˜ ID (UUID ì‚¬ìš©)
      responses:
        '200':
          description: ìœ ì € íƒˆí‡´ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        '401':
          description: ì¸ì¦ ì‹¤íŒ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '400':
          description: ì˜¤ë¥˜ë¡œ ì¸í•œ ì‚­ì œ ì‹¤íŒ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /users/{user_id}/attendance/:
    get:
      tags:
        - user
      summary: ìœ ì €ì˜ ì¶œì„ ì •ë³´ ì¡°íšŒ
      description: íŠ¹ì • ìœ ì €ì˜ ì¶œì„ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - name: user_id
          in: path
          required: true
          schema:
            type: string
          description: ì¡°íšŒí•  ìœ ì €ì˜ ID
      responses:
        '200':
          description: ì¶œì„ ì •ë³´ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: number
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      start_time:
                        type: string
                        format: date-time
                        description: í™œë™ ì‹œì‘ ë‚ ì§œ (ISO8601 í¬ë§·, UTC)
                      end_time:
                        type: string
                        format: date-time
                        description: í™œë™ ì¢…ë£Œ ë‚ ì§œ (ISO8601 í¬ë§·, UTC)
                      attendance_count:
                        type: integer
                        description: ì¶œì„ íšŸìˆ˜
                      late_count:
                        type: integer
                        description: ì§€ê° íšŸìˆ˜
                      absent_count:
                        type: integer
                        description: ê²°ì„ íšŸìˆ˜
                      schedules:
                        type: array
                        description: ì°¸ì„ ëŒ€ìƒì¸ ëª¨ë“  ìŠ¤ì¼€ì¥´
                        items:
                          type: object
                          properties:
                            title:
                              type: string
                              example: "ì§êµ° ì„¸ì…˜2"
                              description: ìŠ¤ì¼€ì¥´ ì œëª©
                            description:
                              type: string
                              example: "ì»¤ë¦¬í˜ëŸ¼ì— ëŒ€í•œ ì„¤ëª… ë¬¸êµ¬ ì‘ì„±"
                              description: ìŠ¤ì¼€ì¥´ ì„¤ëª… ë¬¸êµ¬
                            schedule_time:
                              type: string
                              format: date-time
                              description: ìŠ¤ì¼€ì¥´ ì‹œê°„ (ISO8601 í¬ë§·, UTC)
                            attendance_status:
                              type: string
                              enum: [tbd, present, late, absent, exception]
                              description: ì¶œì„ ìƒíƒœ (ë¯¸ì •, ì¶œì„, ì§€ê°, ê²°ì„, ì˜ˆì™¸)
                            note:
                              type: string
                              example: "êµ°ëŒ€ í›ˆë ¨ìœ¼ë¡œ ì¸í•œ ê²°ì„ ë“±..ğŸ§"
                              description: ì¶œì„ ê´€ë ¨ ë¹„ê³ 
        '401':
          description: ì¸ì¦ ì‹¤íŒ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /qr/encode/:
    post:
      tags:
        - qr
      summary: QR ë¬¸ìì—´ ìƒì„±
      description: ì‚¬ìš©ì ID ë° íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ í¬í•¨í•˜ì—¬, QRë¡œ ì¸ì½”ë”©í•  ë¬¸ìì—´ì„ ìƒì„±í•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                user_id:
                  type: string
                  format: uuid
                  description: ì‚¬ìš©ìì˜ ID (UUID)
              required:
                - user_id
      responses:
        '200':
          description: QR ë¬¸ìì—´ì´ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: number
                    example: 200
                  message:
                    type: string
                    example: "QR encode success"
                  data:
                    type: object
                    properties:
                      qr_string:
                        type: string
                        example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        description: QR ì¸ì½”ë”©ëœ ë¬¸ìì—´(JWT ë“±)

  /qr/decode/:
    post:
      tags:
        - qr
      summary: QR ë¬¸ìì—´ ë””ì½”ë”©/ê²€ì¦
      description: QR ë¬¸ìì—´ì„ ë””ì½”ë”©í•œ ë’¤, í¬í•¨ëœ ì‹œê°„ ì •ë³´ê°€ ìœ íš¨í•œì§€(ë§Œë£Œ ë“±)ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                qr_string:
                  type: string
                  description: ë””ì½”ë”©í•  QR ë¬¸ìì—´(JWT ë“±)
              required:
                - qr_string
      responses:
        '200':
          description: ìœ íš¨í•œ QR ë¬¸ìì—´ë¡œë¶€í„° ì •ë³´ë¥¼ ì„±ê³µì ìœ¼ë¡œ ë””ì½”ë”©í–ˆìŠµë‹ˆë‹¤.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: number
                    example: 200
                  message:
                    type: string
                    example: "QR decode success"
                  data:
                    type: object
                    properties:
                      user_id:
                        type: string
                        format: uuid
                        description: ë””ì½”ë”©ëœ ì‚¬ìš©ì ID (UUID)
                      timestamp:
                        type: string
                        format: date-time
                        description: QR ìƒì„± ì‹œê°„ (ISO8601 í¬ë§·, UTC)
        '400':
          description: QR ë¬¸ìì—´ì„ í•´ì„í•  ìˆ˜ ì—†ìŒ (í˜•ì‹ ì˜¤ë¥˜ ë“±)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '410':
          description: QR ì •ë³´ê°€ ë§Œë£Œë˜ì—ˆê±°ë‚˜ ì‚¬ìš© ë¶ˆê°€ëŠ¥í•¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: QR ë¬¸ìì—´ì€ í•´ë…ëì§€ë§Œ, ì¶”ê°€ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ì—†ëŠ” ìƒíƒœ (ê¸°íƒ€ ì˜ˆì™¸)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /schedules/:
    get:
      tags:
        - schedule
      summary: ìŠ¤ì¼€ì¥´ ëª©ë¡ ì¡°íšŒ
      description: ìŠ¤ì¼€ì¥´ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      responses:
        '200':
          description: ìŠ¤ì¼€ì¥´ ëª©ë¡
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: number
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                          description: ìŠ¤ì¼€ì¥´ ID (UUID)
                        title:
                          type: string
                          example: "ì§êµ° ì„¸ì…˜2"
                          description: ìŠ¤ì¼€ì¥´ ì œëª©
                        description:
                          type: string
                          example: "ì»¤ë¦¬í˜ëŸ¼ì— ëŒ€í•œ ì„¤ëª… ë¬¸êµ¬ ì‘ì„±"
                          description: ìŠ¤ì¼€ì¥´ ì„¤ëª… ë¬¸êµ¬
                        start_time:
                          type: string
                          format: date-time
                          description: ìŠ¤ì¼€ì¥´ ì‹œì‘ ì‹œê°„ (ISO8601 í¬ë§·, UTC)
                        end_time:
                          type: string
                          format: date-time
                          description: ìŠ¤ì¼€ì¥´ ì¢…ë£Œ ì‹œê°„ (ISO8601 í¬ë§·, UTC)

  /schedules/{schedule_id}/:
    get:
      tags:
        - schedule
      summary: ìŠ¤ì¼€ì¥´ ì¡°íšŒ ("now" ì‚¬ìš© ê°€ëŠ¥)
      description: íŠ¹ì • ìŠ¤ì¼€ì¥´ì˜ ì„¸ë¶€ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - name: schedule_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ì¡°íšŒí•  ìŠ¤ì¼€ì¥´ì˜ ID (UUID ì‚¬ìš©)
      responses:
        '200':
          description: ìŠ¤ì¼€ì¥´ ì„¸ë¶€ ì •ë³´ ì¡°íšŒ
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: number
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      title:
                        type: string
                        example: "ì§êµ° ì„¸ì…˜2"
                        description: ìŠ¤ì¼€ì¥´ ì œëª©
                      description:
                        type: string
                        example: "ì»¤ë¦¬í˜ëŸ¼ì— ëŒ€í•œ ì„¤ëª… ë¬¸êµ¬ ì‘ì„±"
                        description: ìŠ¤ì¼€ì¥´ ì„¤ëª… ë¬¸êµ¬
                      start_time:
                        type: string
                        format: date-time
                        description: ìŠ¤ì¼€ì¥´ ì‹œì‘ ì‹œê°„ (ISO8601 í¬ë§·, UTC)
                      end_time:
                        type: string
                        format: date-time
                        description: ìŠ¤ì¼€ì¥´ ì¢…ë£Œ ì‹œê°„ (ISO8601 í¬ë§·, UTC)

    patch:
      tags:
        - schedule
      summary: ìŠ¤ì¼€ì¥´ ìˆ˜ì •
      description: íŠ¹ì • ìŠ¤ì¼€ì¥´ì˜ ì •ë³´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - name: schedule_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ìˆ˜ì •í•  ìŠ¤ì¼€ì¥´ì˜ ID (UUID ì‚¬ìš©)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  example: "ì§êµ° ì„¸ì…˜2"
                  description: ìŠ¤ì¼€ì¥´ ì œëª©
                description:
                  type: string
                  example: "ì»¤ë¦¬í˜ëŸ¼ì— ëŒ€í•œ ì„¤ëª… ë¬¸êµ¬ ì‘ì„±"
                  description: ìŠ¤ì¼€ì¥´ ì„¤ëª… ë¬¸êµ¬
                start_time:
                  type: string
                  format: date-time
                  description: ìŠ¤ì¼€ì¥´ ì‹œì‘ ì‹œê°„ (ISO8601 í¬ë§·, UTC)
                end_time:
                  type: string
                  format: date-time
                  description: ìŠ¤ì¼€ì¥´ ì¢…ë£Œ ì‹œê°„ (ISO8601 í¬ë§·, UTC)
      responses:
        '200':
          description: ìŠ¤ì¼€ì¥´ ìˆ˜ì • ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        '400':
          description: ì˜ëª»ëœ ìš”ì²­ ë°ì´í„°
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    delete:
      tags:
        - schedule
      summary: ìŠ¤ì¼€ì¥´ ì‚­ì œ
      description: íŠ¹ì • ìŠ¤ì¼€ì¥´ì„ ì‚­ì œí•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - name: schedule_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ì‚­ì œí•  ìŠ¤ì¼€ì¥´ì˜ ID (UUID ì‚¬ìš©)
      responses:
        '200':
          description: ìŠ¤ì¼€ì¥´ ì‚­ì œ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        '400':
          description: ì˜¤ë¥˜ë¡œ ì¸í•œ ì‚­ì œ ì‹¤íŒ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /schedules/{schedule_id}/attendances/:
    get:
      tags:
        - attendance
      summary: ì¶œì„ í˜„í™© ì¡°íšŒ
      description: íŠ¹ì • ìŠ¤ì¼€ì¤„ì˜ ì¶œì„ í˜„í™©ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - name: schedule_id
          in: path
          required: true
          schema:
            type: string
          description: ì¡°íšŒí•  ìŠ¤ì¼€ì¤„ ID
      responses:
        '200':
          description: ì¶œì„ í˜„í™© ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: number
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      attendance_count:
                        type: integer
                        description: ì¶œì„ ì¸ì›
                      late_count:
                        type: integer
                        description: ì§€ê° ì¸ì›
                      absent_count:
                        type: integer
                        description: ê²°ì„ ì¸ì›
                      members:
                        type: array
                        description: ì°¸ì„ ëŒ€ìƒì¸ ëª¨ë“  ë©¤ë²„
                        items:
                          type: object
                          properties:
                            name:
                              type: string
                              example: "ê¹€ë””ë””"
                              description: ìœ ì € ì´ë¦„
                            tags:
                              type: array
                              example: ["role:member", "position:designer", "team:ios2", "generation:11ê¸°"]
                              items:
                                type: string
                                description: ì‚¬ìš©ì íƒœê·¸
                            attendance_status:
                              type: string
                              enum: [tbd, present, late, absent, exception]
                              description: ì¶œì„ ìƒíƒœ (ë¯¸ì •, ì¶œì„, ì§€ê°, ê²°ì„, ì˜ˆì™¸)
                            note:
                              type: string
                              example: "êµ°ëŒ€ í›ˆë ¨ìœ¼ë¡œ ì¸í•œ ê²°ì„ ë“±..ğŸ§"
                              description: ì¶œì„ ê´€ë ¨ ë¹„ê³ 

  /schedules/{schedule_id}/attendances/{user_id}/:
    patch:
      tags:
        - attendance
      summary: ì¶œì„ ìˆ˜ì •
      description: íŠ¹ì • ìŠ¤ì¼€ì¤„ì˜ ì¶œì„ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - name: schedule_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ìˆ˜ì •í•  ìŠ¤ì¼€ì¥´ì˜ ID (UUID ì‚¬ìš©)
        - name: user_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: ìˆ˜ì •í•  ë©¤ë²„ ID (UUID ì‚¬ìš©)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                attendance_status:
                  type: string
                  enum: [present, late, absent, unknown]
                  description: ì¶œì„ ìƒíƒœ (ì¶œì„, ì§€ê°, ê²°ì„, ì •ë³´ ì—†ìŒ)
                attendance_time:
                  type: string
                  format: date-time
                  description: ì¶œì„ì´ ë“±ë¡ëœ ì‹œê°„ (ISO8601 í¬ë§·, UTC)
                method:
                  type: string
                  enum: [qr, manual]
                  description: ì¶œì„ ë“±ë¡ ë°©ë²• (QR ì½”ë“œ ë˜ëŠ” ìˆ˜ë™ ë“±ë¡)
                note:
                  type: string
                  example: "êµ°ëŒ€ í›ˆë ¨ìœ¼ë¡œ ì¸í•œ ê²°ì„ ë“±..ğŸ§"
                  description: ì¶œì„ ê´€ë ¨ ë¹„ê³ 
      responses:
        '200':
          description: ì¶œì„ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        '400':
          description: ì˜ëª»ëœ ìš”ì²­ ë°ì´í„°
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        '401':
          description: ì¸ì¦ ì‹¤íŒ¨
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    InviteCode:
      type: object
      properties:
        code:
          type: string
          description: ë“±ë¡ì„ ìœ„í•œ ì´ˆëŒ€ì½”ë“œ
        invite_type:
          type: string
          enum: [member, moderator]
          description: ì´ˆëŒ€ ìœ í˜• (ì¼ë°˜ ìœ ì € ë˜ëŠ” ìš´ì˜ì§„)
        created_at:
          type: string
          format: date-time
          description: ìƒì„± ì‹œê° (ISO8601 í¬ë§·, UTC)
      required:
        - code
        - invite_type
        - created_at
    
    SuccessResponse:
      type: object
      properties:
        code:
          type: number
          description: ì„±ê³µ ì½”ë“œ
        message:
          type: string
          example: "success"
          description: ì„±ê³µ ë©”ì‹œì§€
        data:
          type: object

    ErrorResponse:
      type: object
      properties:
        code:
          type: integer
          description: ì˜¤ë¥˜ ì½”ë“œ
        message:
          type: string
          description: ì˜¤ë¥˜ ë©”ì‹œì§€
        data:
          type: object
          properties:
            request_id:
              type: string
              description: ìš”ì²­ ì¶”ì ì„ ìœ„í•œ ê³ ìœ  ID
      required:
        - code
        - message
        - data
